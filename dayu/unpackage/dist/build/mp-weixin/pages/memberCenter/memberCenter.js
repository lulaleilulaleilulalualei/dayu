(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/memberCenter/memberCenter"],{"20e8":function(t,e,i){"use strict";i.r(e);var s=i("9fe6"),a=i("9fa9");for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);i("b483");var r=i("2877"),o=Object(r["a"])(a["default"],s["a"],s["b"],!1,null,"ceb73ca2",null);e["default"]=o.exports},"2c93":function(t,e,i){t.exports=i.p+"static/img/member_success.ef1bb731.png"},"300f":function(t,e,i){"use strict";i.r(e);var s=i("ae1d"),a=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);e["default"]=a.a},3745:function(t,e,i){"use strict";i.r(e);var s=i("3ce1"),a=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);e["default"]=a.a},3832:function(t,e,i){"use strict";i.r(e);var s=i("ab30"),a=i("300f");for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);i("9e87");var r=i("2877"),o=Object(r["a"])(a["default"],s["a"],s["b"],!1,null,"1ebb06af",null);e["default"]=o.exports},"387a":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"memberCenter"},[i("cu-custom",{attrs:{bgColor:"white",isBack:!0,mpcomid:"fb7a2e82-0"}},[i("block",{slot:"content"},[t._v("会员中心")])],1),i("view",{staticClass:"contentBox"},[i("view",{staticClass:"showMemberCard"},[i("swiper",{staticClass:"swiper",attrs:{"previous-margin":"20rpx",current:t.currentIdx,"next-margin":"20rpx",eventid:"fb7a2e82-0"},on:{change:t.swiperChange}},t._l(t.cardArr,function(e,s){return i("block",{key:e.vip_id},[i("swiper-item",{staticClass:"swiperItem",attrs:{mpcomid:"fb7a2e82-1-"+s}},[i("scroll-view",{staticClass:"swiperScroll",attrs:{"scroll-y":!0,"scroll-with-animation":!0,"scroll-top":e.scrollTop}},[i("view",{staticClass:"itemCardBox"},[i("view",{staticClass:"itemCardShow"},[i("view",{staticClass:"itemCardBg"},[i("image",{attrs:{src:e.icon,mode:""}})]),i("view",{staticClass:"itemCardContent"},[i("view",{staticClass:"itemCardTopContent"},[i("view",{staticClass:"itemCardTitle skeleton-rect",class:{card4_color:4==e.vip_id}},[t._v(t._s(e.vip_name))]),i("view",{staticClass:"itemCardCount skeleton-rect",class:[{card1_color:1==e.vip_id},{card2_color:2==e.vip_id},{card3_color:3==e.vip_id},{card4_color:4==e.vip_id}]},[t._v("开通会员享"+t._s(e.rights_list.length)+"大会员权益")])]),i("view",{staticClass:"itemCardBottomContent"},[1==e.vip_id?i("view",{staticClass:"itemCardPrice skeleton-rect"},[i("text",[t._v("免费")])]):t._e(),1!=e.vip_id?i("view",{staticClass:"itemCardPrice skeleton-rect",class:{card4_color:4==e.vip_id}},[t._v("￥"),i("text",[t._v(t._s(e.vip_price))]),t._v("/年")]):t._e(),1==t.isOpenCard&&e.vip_id==t.cardId?i("block",[1==e.vip_id?i("view",{staticClass:"itemCardUseLimit"},[t._v("剩余次数： "+t._s(t.fishCount)+"/次")]):t._e(),1!=e.vip_id?i("view",{staticClass:"itemCardUseLimit",class:{card4_color:4==e.vip_id}},[t._v(t._s(t.vipEndTime[0])+"年"+t._s(t.vipEndTime[1])+"月"+t._s(t.vipEndTime[2])+"日0点到期")]):t._e()]):t._e()],1)])])]),i("view",{staticClass:"showMemberPower"},[i("view",{staticClass:"memberPowerTitle"},[t._v("体验会员权益")]),t._l(e.rights_list,function(s,a){return i("view",{key:a,staticClass:"itemMemberPower"},[i("view",{staticClass:"itemMemberPowerIcon"},[i("img",{attrs:{src:s.icon,alt:""}})]),i("view",{staticClass:"itemMemberPowerInfo"},[i("view",{staticClass:"itemMemberPowerTitle"},[t._v(t._s(s.name))]),i("view",{staticClass:"itemMemberPowerDesc"},[t._v(t._s(s.desc))]),1==s.type?i("view",{staticClass:"itemMemberPowerType"},[i("view",{staticClass:"itemShowMemberText"},[t._v("大渔会员"+t._s(e.count_vip_price)+"元/次")]),i("view",{staticClass:"itemShowNoMemberText"},[t._v("普通用户"+t._s(e.count_price)+"元/次")])]):t._e(),1!=s.type?i("view",{staticClass:"itemMemberPowerType"},[i("view",{staticClass:"itemShowMemberText"},[t._v(t._s(1==e.vip_id?"体验会员专属":2==e.vip_id?"黄金会员专属":3==e.vip_id?"钻石会员专属":"黑金会员专属"))])]):t._e()])])})],2)])],1)],1)}))],1)]),0==t.isOpenCard?i("view",{staticClass:"operationBtn"},[i("view",{attrs:{eventid:"fb7a2e82-1"},on:{click:t.toOpenMemberCard}},[i("text",[t._v(t._s(t.btnText))])]),t.isAuth?t._e():i("button",{staticClass:"toAuthBtn",attrs:{"open-type":"getUserInfo",lang:"zh_CN",eventid:"fb7a2e82-2"},on:{getuserinfo:t.getUserInfo}},[t._v("授权")])],1):t._e(),1==t.isOpenCard&&1!=t.curShowVip.vip_id&&t.curShowVip.vip_id>=t.cardId&&t.isAuth?i("view",{staticClass:"operationBtn"},[i("view",{attrs:{eventid:"fb7a2e82-3"},on:{click:t.toOpenMemberCard}},[t._v(t._s(t.btnText))])]):t._e(),t.isShowMemberInfo?i("getMemberInfo",{attrs:{eventid:"fb7a2e82-4",mpcomid:"fb7a2e82-2"},on:{getMemberInfo:t.memberInfo}}):t._e(),t.isToPayBox?i("payBox",{attrs:{vipid:t.curShowVip.vip_id,vip_pri:t.curShowVip.vip_price,eventid:"fb7a2e82-5",mpcomid:"fb7a2e82-3"},on:{toPayBox:t.toPayBox,toPayMember:t.toPayMember}}):t._e(),t.isShowSuccessBox?i("memberSuccess",{attrs:{vipid:t.curShowVip.vip_id,eventid:"fb7a2e82-6",mpcomid:"fb7a2e82-4"},on:{toMemberSuccess:t.toMemberSuccess}}):t._e()],1)},a=[];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a})},"3ce1":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=o(i("c845")),a=o(i("3832")),n=o(i("20e8")),r=i("2f62");function o(t){return t&&t.__esModule?t:{default:t}}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},s=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),s.forEach(function(e){u(t,e,i[e])})}return t}function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var d={data:function(){return{cardArr:[],currentIdx:0,isOpenCard:0,cardId:0,curShowVip:{},scrollTop:0,vipEndTime:"",fishCount:null,btnText:"",userName:"",userTel:"",isShowMemberInfo:!1,isToPayBox:!1,isShowSuccessBox:!1,isAuth:!1}},components:{getMemberInfo:s.default,payBox:a.default,memberSuccess:n.default},computed:c({},(0,r.mapGetters)(["c_cardList"])),onLoad:function(t){var e=this;this.currentIdx=t.idx,this.$userInfo&&(this.isAuth=!0,this.isOpenCard=this.$userInfo.is_vip,this.$userInfo.vip_end_time&&(this.vipEndTime=this.$userInfo.vip_end_time.split(" ")[0].split("-")),1==this.isOpenCard&&(this.cardId=this.$userInfo.vip_id,this.userName=this.$userInfo.name,this.userTel=this.$userInfo.tel)),this.cardArr=this.c_cardList,this.cardArr.map(function(t,i){1==e.isOpenCard?e.cardId==t.vip_id?t.btnText="重新购买":t.vip_id>e.cardId?t.btnText="立即激活":t.btnText:1==t.vip_id?t.btnText="新用户免费体验":t.btnText="立即激活",t.scrollTop=0,t.rights_list.map(function(t,e){switch(t.type){case 1:t.icon="../../static/pow_icon_1.png";break;case 2:t.icon="../../static/pow_icon_2.png";break;case 3:t.icon="../../static/pow_icon_3.png";break;case 4:t.icon="../../static/pow_icon_4.png";break;case 5:t.icon="../../static/pow_icon_5.png";break;case 6:t.icon="../../static/pow_icon_6.png";break;case 7:t.icon="../../static/pow_icon_7.png";break;case 8:t.icon="../../static/pow_icon_8.png";break;case 9:t.icon="../../static/pow_icon_9.png";break;default:break}})}),this.curShowVip=this.cardArr[this.currentIdx],this.btnText=this.cardArr[this.currentIdx].btnText,setTimeout(function(){1==e.isOpenCard&&e.residueFishCount()},10)},methods:{getUserInfo:function(e){if("getUserInfo:ok"==e.detail.errMsg){t.showLoading({title:"授权登陆中...",mask:!0});var i=this;this.$api.userLogin(function(e){"1"==e&&(t.hideLoading(),t.showToast({title:"授权登录成功",icon:"success",mask:!0,success:function(){i.isAuth=!0,i.isOpenCard=i.$userInfo.is_vip,i.$userInfo.vip_end_time&&(i.vipEndTime=i.$userInfo.vip_end_time.split(" ")[0].split("-")),1==i.isOpenCard&&(i.cardId=i.$userInfo.vip_id,i.userName=i.$userInfo.name,i.userTel=i.$userInfo.tel),i.cardArr.map(function(t,e){1==i.isOpenCard?i.cardId==t.vip_id?t.btnText="重新购买":t.vip_id>i.cardId?t.btnText="立即激活":t.btnText:1==t.vip_id?t.btnText="新用户免费体验":t.btnText="立即激活"}),i.curShowVip=i.cardArr[i.currentIdx],i.btnText=i.cardArr[i.currentIdx].btnText,setTimeout(function(){1==i.isOpenCard&&i.residueFishCount()},10)}}))})}else this.$api.warnNotice("您已拒绝授权！"),this.isAuth=!1},toOpenMemberCard:function(){1!=this.isOpenCard?this.isShowMemberInfo=!this.isShowMemberInfo:this.isToPayBox=!this.isToPayBox},memberInfo:function(t){this.isShowMemberInfo=!1,1==t.type&&(this.userName=t.userName,this.userTel=t.userTel,1!=this.curShowVip.vip_id?this.isToPayBox=!0:this.toPayMember())},toPayBox:function(t){this.isToPayBox=t},toMemberSuccess:function(t){this.isShowSuccessBox=t},swiperChange:function(t){var e=this;this.currentIdx=t.detail.current,this.cardArr[this.currentIdx].scrollTop=-1,this.curShowVip=this.cardArr[this.currentIdx],this.btnText=this.cardArr[this.currentIdx].btnText,setTimeout(function(){e.cardArr[e.currentIdx].scrollTop=0},10)},btnTextChange:function(){var t=this;this.cardArr.map(function(e,i){t.cardId==e.vip_id?e.btnText="重新购买":e.vip_id>t.cardId?e.btnText="立即激活":e.btnText}),this.btnText=this.cardArr[this.currentIdx].btnText},residueFishCount:function(){var t=this;this.$api.ajax({url:this.$config.fishCount,data:{uid:this.$userInfo.uid}}).then(function(e){200==e.statusCode&&0==e.data.code?t.fishCount=e.data.data.surplus_count:t.$api.warnNotice(e.data.message)}).catch(function(e){t.$api.warnNotice("操作失败")})},toPayMember:function(e){var i=this;1!=this.curShowVip.vip_id&&t.showLoading({title:"正在调用支付...",mask:!0});this.$api.ajax({url:this.$config.buyCard,method:"POST",data:{uid:this.$userInfo.uid,openid:this.$userInfo.openid,vip_id:this.curShowVip.vip_id,name:this.userName,tel:this.userTel}}).then(function(e){200==e.statusCode&&0==e.data.code?1!=i.curShowVip.vip_id?(wx.hideLoading(),t.requestPayment({timeStamp:e.data.data.timeStamp,nonceStr:e.data.data.nonceStr,package:e.data.data.package,signType:e.data.data.signType,paySign:e.data.data.paySign,success:function(e){"requestPayment:ok"==e.errMsg&&(i.isToPayBox=!1,t.showToast({title:"支付成功",icon:"success",success:function(){setTimeout(function(){i.isShowSuccessBox=!0,i.isOpenCard=1,i.cardId=i.curShowVip.vip_id,i.btnTextChange(),i.$api.userLogin(function(){})},1500)}}))},fail:function(t){i.$api.warnNotice("支付失败")}})):t.showToast({title:"开通成功",icon:"success",success:function(){setTimeout(function(){i.isShowSuccessBox=!0,i.isOpenCard=1,i.cardId=i.curShowVip.vip_id,i.btnTextChange(),i.$api.userLogin(function(){})},1500)}}):(wx.hideLoading(),i.$api.warnNotice(e.data.message))}).catch(function(t){wx.hideLoading(),i.$api.warnNotice("开通失败")})}}};e.default=d}).call(this,i("543d")["default"])},"61bc":function(t,e,i){"use strict";var s=i("fa9b"),a=i.n(s);a.a},"6bdd":function(t,e,i){},7475:function(t,e,i){"use strict";i.r(e);var s=i("387a"),a=i("3745");for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);i("cd51");var r=i("2877"),o=Object(r["a"])(a["default"],s["a"],s["b"],!1,null,"275ef73e",null);e["default"]=o.exports},"794b":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={data:function(){return{userName:"",userTel:"请点击右侧授权获取",isGetInpInfo:!1}},methods:{getUserName:function(t){this.userName=t.detail.value},getUserTel:function(t){var e=this;this.$api.ajax({url:this.$config.getPhone,data:{session_key:this.$userInfo.session_key,encryptedData:t.detail.encryptedData,iv:t.detail.iv}}).then(function(t){200==t.statusCode&&0==t.data.code?(e.isGetInpInfo=!0,e.userTel=t.data.data.phoneNumber):e.api.warnNotice(t.data.message)}).catch(function(){e.api.warnNotice("操作失败")})},toOpenCard:function(){""!=this.$api.trim(this.userName)?this.isGetInpInfo&&this.$emit("getMemberInfo",{type:1,userName:this.userName,userTel:this.userTel}):this.$api.warnNotice("真实姓名不能为空")},toCloseBox:function(t){"info"==t.target.dataset.sign&&this.$emit("getMemberInfo",{type:0,userName:"",userTel:""})}}};e.default=s},"922c":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"getMemberInfo",attrs:{"data-sign":"info",eventid:"d03a39a4-3"},on:{click:t.toCloseBox}},[i("view",{staticClass:"infoBox"},[i("view",{staticClass:"infoBoxTitle"},[t._v("大渔会员")]),i("view",{staticClass:"itemGetInfo"},[i("view",{staticClass:"itemGetInfoTitle"},[t._v("姓名：")]),i("view",{staticClass:"itemGetInfoInp"},[i("input",{attrs:{type:"text",placeholder:"请输入您的真实姓名","placeholder-style":"color: #AEAEAE",name:"",id:"",eventid:"d03a39a4-0"},on:{blur:t.getUserName,confirm:t.getUserName}})])]),i("view",{staticClass:"itemGetInfo"},[i("view",{staticClass:"itemGetInfoTitle"},[t._v("手机：")]),i("view",{staticClass:"itemGetInfoInp",class:{itemHadInfoInp:t.isGetInpInfo}},[t._v(t._s(t.userTel))]),i("button",{staticClass:"getTelUser",attrs:{"open-type":"getPhoneNumber",eventid:"d03a39a4-1"},on:{getphonenumber:t.getUserTel}},[t._v("点击获取")])],1),i("view",{staticClass:"toOpenCard",attrs:{eventid:"d03a39a4-2"},on:{click:t.toOpenCard}},[t._v("开启大渔之旅")])])])},a=[];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a})},"9e87":function(t,e,i){"use strict";var s=i("c9b7"),a=i.n(s);a.a},"9fa9":function(t,e,i){"use strict";i.r(e);var s=i("e3cb"),a=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);e["default"]=a.a},"9fe6":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"memberSuccess",attrs:{"data-sign":"success",eventid:"2f28b0d9-1"},on:{click:t.closeBox}},[i("view",{staticClass:"showBox"},[i("view",{staticClass:"showBoxText"},[t._v("恭喜您成为")]),i("view",{staticClass:"showBoxTitle"},[t._v("柳叶"+t._s(1==t.vipid?"体验":2==t.vipid?"黄金":3==t.vipid?"钻石":4==t.vipid?"黑金":"")+"会员")]),t._m(0),i("view",{staticClass:"showBoxBtn",attrs:{eventid:"2f28b0d9-0"},on:{click:t.closeBoxBtn}},[t._v("查看权益")])])])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"showBoxImg"},[s("img",{attrs:{src:i("2c93"),alt:""}})])}];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a})},ab30:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"payBox",attrs:{"data-sign":"payBox",eventid:"1a2ad933-2"},on:{click:t.toCloseBox}},[s("view",{staticClass:"showBox"},[s("view",{staticClass:"showBoxTop"},[s("text",[t._v("确认付款")]),s("view",{staticClass:"toCloseBox",attrs:{eventid:"1a2ad933-0"},on:{click:t.toCloseBoxBtn}},[s("img",{attrs:{src:i("bf49"),alt:""}})])]),s("view",{staticClass:"showBoxContent"},[s("view",{staticClass:"showMemberPrice"},[t._v("¥ "+t._s(t.vip_pri))]),s("view",{staticClass:"showMemberType"},[t._v("激活柳叶"+t._s(2==t.vipid?"黄金":3==t.vipid?"钻石":4==t.vip_pri?"黑金":"")+"会员 （权益使用次数不叠加）")]),s("view",{staticClass:"showMemberToPay",attrs:{eventid:"1a2ad933-1"},on:{click:t.toPayMember}},[t._v("微信支付")])])])])},a=[];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a})},ae1d:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={data:function(){return{}},props:{vipid:{type:Number,default:0},vip_pri:{type:Number,default:0}},methods:{toCloseBoxBtn:function(){this.$emit("toPayBox",!1)},toCloseBox:function(t){"payBox"==t.target.dataset.sign&&this.$emit("toPayBox",!1)},toPayMember:function(){this.$emit("toPayMember",!0)}}};e.default=s},b483:function(t,e,i){"use strict";var s=i("c668"),a=i.n(s);a.a},bf6b:function(t,e,i){"use strict";i("9010");var s=n(i("b0ce")),a=n(i("7475"));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(a.default))},c668:function(t,e,i){},c845:function(t,e,i){"use strict";i.r(e);var s=i("922c"),a=i("d618");for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);i("61bc");var r=i("2877"),o=Object(r["a"])(a["default"],s["a"],s["b"],!1,null,"ccd36d22",null);e["default"]=o.exports},c9b7:function(t,e,i){},cd51:function(t,e,i){"use strict";var s=i("6bdd"),a=i.n(s);a.a},d618:function(t,e,i){"use strict";i.r(e);var s=i("794b"),a=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);e["default"]=a.a},e3cb:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={data:function(){return{}},props:{vipid:{type:Number,default:0}},methods:{closeBox:function(t){"success"==t.target.dataset.sign&&this.$emit("toMemberSuccess",!1)},closeBoxBtn:function(){this.$emit("toMemberSuccess",!1)}}};e.default=s},fa9b:function(t,e,i){}},[["bf6b","common/runtime","common/vendor"]]]);