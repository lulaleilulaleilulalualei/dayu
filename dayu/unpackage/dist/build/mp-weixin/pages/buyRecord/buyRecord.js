(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/buyRecord/buyRecord"],{"2b99":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=r(i("1b42")),o=r(i("68c4")),a=r(i("4ce6")),n=r(i("38b6"));function r(t){return t&&t.__esModule?t:{default:t}}var c={data:function(){return{isShowSkeleton:!0,buyList:[{},{},{},{}],index:1,size:10,isMore:!0,isLoadErr:!1}},components:{noMore:o.default,noListData:a.default,loadErr:n.default,skeleton:s.default},onLoad:function(){var t=this;if(this.$userInfo){if(this.buyList=[],this.$userInfo&&this.$userInfo.buy_count>0)for(var e=0;e<this.$userInfo.buy_count;e++)this.buyList.push({});this.getBuyList()}else this.buyList=[],setTimeout(function(){t.isShowSkeleton=!1},200)},methods:{toJumpBuyDetail:function(e){var i=this;t.navigateTo({url:"/pages/orderDetail/orderDetail?id=".concat(i.buyList[e].buy_id)})},toLoadMore:function(){this.isMore&&this.getBuyList()},toRelaodData:function(){this.isLoadErr=!1,this.index=1,this.buyList=[],this.isMore=!0,this.getBuyList()},getBuyList:function(){var t=this;this.$api.ajax({url:this.$config.buyRecord,data:{uid:this.$userInfo.uid,index:this.index,size:this.size}}).then(function(e){if(200==e.statusCode&&0==e.data.code){1==t.index&&(t.buyList=[]);var i=e.data.data;i.map(function(t,e){var i=JSON.parse(t.buy_json);t.proImg=i.proImg,t.proName=i.proName,t.type=i.type,1==i.type&&(t.startTime=i.expireStart.replace(/-/g,"/"),t.endTime=i.expireEnd.replace(/-/g,"/"))}),i.length<t.size?(t.buyList=t.buyList.concat(i),t.isMore=!1):(t.buyList=t.buyList.concat(i),t.index++),setTimeout(function(){t.isShowSkeleton=!1},200)}else 1==t.index?(t.isShowSkeleton=!1,t.isLoadErr=!0):t.$api.warnNotice(e.data.message)}).catch(function(e){console.log(e),1==t.index?(t.isShowSkeleton=!1,t.isLoadErr=!0):t.$api.warnNotice("加载失败")})}}};e.default=c}).call(this,i("543d")["default"])},"3e23":function(t,e,i){"use strict";i.r(e);var s=i("2b99"),o=i.n(s);for(var a in s)"default"!==a&&function(t){i.d(e,t,function(){return s[t]})}(a);e["default"]=o.a},4078:function(t,e,i){"use strict";i("9010");var s=a(i("b0ce")),o=a(i("cb22"));function a(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(o.default))},b966:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"buyRecord"},[t.isShowSkeleton?i("skeleton",{attrs:{mpcomid:"4c018b8f-0"}}):t._e(),i("cu-custom",{attrs:{bgColor:"white",isBack:!0,mpcomid:"4c018b8f-1"}},[i("block",{slot:"content"})],1),t._m(0),i("view",{staticClass:"contentBox"},[i("scroll-view",{staticClass:"contentScroll",attrs:{"scroll-y":!t.isShowSkeleton,eventid:"4c018b8f-1"},on:{scrolltolower:t.toLoadMore}},[t._l(t.buyList,function(e,s){return i("view",{key:s,staticClass:"itemShowStore",class:{noUserCoupon:1==e.type&&0!=e.ticket_status},attrs:{eventid:"4c018b8f-0-"+s},on:{click:function(e){t.toJumpBuyDetail(s)}}},[i("view",{staticClass:"itemStoreImg skeleton-rect"},[i("image",{attrs:{src:e.proImg,mode:"aspectFill"}})]),i("view",{staticClass:"itemStoreInfo"},[i("view",{staticClass:"itemStoreTopInfo"},[i("view",{staticClass:"itemStoreTitle skeleton-rect"},[t._v(t._s(e.proName))]),i("view",{staticClass:"itemStoreBuyTime skeleton-rect"},[t._v("购买时间："+t._s(e.created_time))]),1==e.type?i("view",{staticClass:"itemStoreEffectTime skeleton-rect"},[t._v("有效期： "+t._s(e.startTime)+"-"+t._s(e.endTime))]):t._e()]),i("view",{staticClass:"itemStorePrice skeleton-rect"},[t._v("¥"+t._s(e.pay_fee))])]),1==e.type&&0!=e.ticket_status?i("view",{staticClass:"showCouponStatus"},[i("img",{attrs:{src:1==e.ticket_status?"../../static/hadUse.png":2==e.ticket_status?"../../static/pastDut.png":"",alt:""}})]):t._e()])}),t.isMore?t._e():i("noMore",{attrs:{mpcomid:"4c018b8f-2"}})],2)],1),0==t.buyList.length?i("noListData",{attrs:{noText:"还没有购买记录",mpcomid:"4c018b8f-3"}}):t._e(),t.isLoadErr?i("loadErr",{attrs:{eventid:"4c018b8f-2",mpcomid:"4c018b8f-4"},on:{toRelaodData:t.toRelaodData}}):t._e()],1)},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"contentTitle"},[i("text",{staticClass:"skeleton-rect"},[t._v("购买记录")])])}];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return o})},c9ee:function(t,e,i){"use strict";var s=i("ed9a"),o=i.n(s);o.a},cb22:function(t,e,i){"use strict";i.r(e);var s=i("b966"),o=i("3e23");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i("c9ee");var n=i("2877"),r=Object(n["a"])(o["default"],s["a"],s["b"],!1,null,"338ab4a0",null);e["default"]=r.exports},ed9a:function(t,e,i){}},[["4078","common/runtime","common/vendor"]]]);