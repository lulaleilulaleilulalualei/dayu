(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/activityApply/activityApply"],{5697:function(t,e,a){"use strict";a.r(e);var i=a("a582"),s=a("e32f");for(var c in s)"default"!==c&&function(t){a.d(e,t,function(){return s[t]})}(c);a("6b7d");var n=a("2877"),o=Object(n["a"])(s["default"],i["a"],i["b"],!1,null,"3dabf5f6",null);e["default"]=o.exports},"6b7d":function(t,e,a){"use strict";var i=a("cfa7"),s=a.n(i);s.a},"9fa5":function(t,e,a){"use strict";a("9010");var i=c(a("b0ce")),s=c(a("5697"));function c(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(s.default))},a582:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"activityApply"},[a("cu-custom",{attrs:{bgColor:"white",isBack:!0,mpcomid:"3bc32042-0"}},[a("block",{slot:"content"},[t._v("活动报名")])],1),a("view",{staticClass:"applyBox"},[a("view",{staticClass:"showApplyInfo"},[a("view",{staticClass:"applyActImg"},[a("image",{attrs:{src:t.c_actInfo.thumb,mode:"aspectFill"}})]),a("view",{staticClass:"applyActInfo"},[a("view",{staticClass:"applyActTitle"},[t._v(t._s(t.c_actInfo.name))]),a("view",{staticClass:"applyActOtherInfo"},[a("view",{staticClass:"applyActTime"},[t._v("时间："+t._s(t.startTime)+" - "+t._s(t.endTime))]),a("view",{staticClass:"applyActAddress"},[t._v("地点："+t._s(t.c_actInfo.address))])])])]),a("view",{staticClass:"showApplyFee"},[a("view",{staticClass:"applyFeeTitle"},[t._v("活动报名费用")]),a("view",{staticClass:"applyFeeNum"},[t._v("x"+t._s(t.c_actInfo.applyNum))]),a("view",{staticClass:"applyFeeCost"},[t._v("¥"+t._s(t.c_actInfo.apply_fee))])]),1==t.c_actInfo.act_type?a("view",{staticClass:"showApplyNotice"},[t._v("钻石会员首次参加减免一人费用，黑金会员一直减免一人费用")]):t._e()]),a("view",{staticClass:"writeApplyInfo"},[a("view",{staticClass:"writeInfoTitle"},[t._v("填写报名")]),a("view",{staticClass:"itemWriteInfo"},[a("view",{staticClass:"itemWriteTitle"},[t._v("姓名")]),a("view",{staticClass:"itemWriteInp"},[a("input",{attrs:{type:"text",value:t.userName,"confirm-type":"done",placeholder:"请填写您的姓名",eventid:"3bc32042-0"},on:{blur:t.toGetUserName,confirm:t.toGetUserName}})])]),a("view",{staticClass:"itemWriteInfo"},[a("view",{staticClass:"itemWriteTitle"},[t._v("电话")]),a("view",{staticClass:"itemWriteInp"},[a("input",{attrs:{type:"number",value:t.userTel,"confirm-type":"done",placeholder:"请填写您的电话",eventid:"3bc32042-1"},on:{blur:t.toGetUserTel,confirm:t.toGetUserTel}})])])]),t._m(0),a("view",{staticClass:"actApplyBtn"},[a("view",{staticClass:"actApplyBtnTotal"},[a("view",{staticClass:"actApplyBtnTitle"},[t._v("合计")]),a("view",{staticClass:"actApplyBtnPrice"},[t._v("￥"+t._s(t.c_actInfo.priceTotal))])]),a("view",{staticClass:"toPayBtn",attrs:{eventid:"3bc32042-2"},on:{click:t.toPayApply}},[t._v("支付报名")])])],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"applyNoticeIcon"},[a("view",{staticClass:"itemApplyNotice"},[a("view",{staticClass:"itemApplyNoticeIcon"},[t._v("保")]),a("view",{staticClass:"itemApplyNoticeText"},[t._v("交易保障")])]),a("view",{staticClass:"itemApplyNotice"},[a("view",{staticClass:"itemApplyNoticeIcon"},[t._v("退")]),a("view",{staticClass:"itemApplyNoticeText"},[t._v("不支持退款")])])])}];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})},bc94:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a("2f62");function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},i=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),i.forEach(function(e){c(t,e,a[e])})}return t}function c(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var n={data:function(){return{userName:"",userTel:""}},onLoad:function(){this.$userInfo.name&&(this.userName=this.$userInfo.name),this.$userInfo.tel&&(this.userTel=this.$userInfo.tel)},computed:s({},(0,i.mapGetters)(["c_actInfo"]),{startTime:function(){return this.c_actInfo.start_time.split(" ")[0].replace(/-/g,"/")},endTime:function(){return this.c_actInfo.end_time.split(" ")[0].replace(/-/g,"/")}}),methods:{toGetUserName:function(t){this.userName=t.detail.value},toGetUserTel:function(t){this.userTel=t.detail.value},toPayApply:function(){""!=this.$api.trim(this.userName)?this.$api.inputTest(this.userTel,"tel")&&(1==this.c_actInfo.is_fee&&t.showLoading({title:"正在调用支付...",mask:!0}),this.toPay()):this.$api.warnNotice("用户名不能为空")},toPay:function(){var e=this;this.$api.ajax({url:this.$config.activityPay,method:"POST",data:{uid:this.$userInfo.uid,openid:this.$userInfo.openid,avatar:this.$userInfo.avatar,name:this.userName,tel:this.userTel,act_id:this.c_actInfo.act_id,apply_num:this.c_actInfo.applyNum,apply_json:JSON.stringify({})}}).then(function(a){200==a.statusCode&&0==a.data.code?1==e.c_actInfo.is_fee?(wx.hideLoading(),a.data.data.paySign?t.requestPayment({timeStamp:a.data.data.timeStamp,nonceStr:a.data.data.nonceStr,package:a.data.data.package,signType:a.data.data.signType,paySign:a.data.data.paySign,success:function(e){"requestPayment:ok"==e.errMsg&&t.showToast({title:"支付成功",icon:"success",success:function(){setTimeout(function(){wx.navigateTo({url:"/pages/activityApplyDetail/activityApplyDetail?id=".concat(a.data.data.apply_id,"&from=apply")})},1500)}})},fail:function(t){e.$api.warnNotice("支付失败")}}):t.showToast({title:"报名成功",icon:"success",success:function(){setTimeout(function(){wx.navigateTo({url:"/pages/activityApplyDetail/activityApplyDetail?id=".concat(a.data.data,"&from=apply")})},1500)}})):t.showToast({title:"报名成功",icon:"success",success:function(){setTimeout(function(){wx.navigateTo({url:"/pages/activityApplyDetail/activityApplyDetail?id=".concat(a.data.data,"&from=apply")})},1500)}}):(wx.hideLoading(),e.$api.warnNotice(a.data.message))}).catch(function(t){wx.hideLoading(),e.$api.warnNotice("报名失败")})}}};e.default=n}).call(this,a("543d")["default"])},cfa7:function(t,e,a){},e32f:function(t,e,a){"use strict";a.r(e);var i=a("bc94"),s=a.n(i);for(var c in i)"default"!==c&&function(t){a.d(e,t,function(){return i[t]})}(c);e["default"]=s.a}},[["9fa5","common/runtime","common/vendor"]]]);