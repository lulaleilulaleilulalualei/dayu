(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/activityDetail/activityDetail"],{"099b":function(t,e,i){"use strict";var a=i("405d"),s=i.n(a);s.a},1596:function(t,e,i){"use strict";var a=i("1618"),s=i.n(a);s.a},1618:function(t,e,i){},"39a9":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=l(i("1b42")),s=l(i("79e3")),o=l(i("38b6")),c=l(i("95cf")),n=i("2f62");function l(t){return t&&t.__esModule?t:{default:t}}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},a=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),a.forEach(function(e){u(t,e,i[e])})}return t}function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var d={data:function(){return{isShowSkeleton:!0,navColor:"white",isShowMoreContent:!1,textOpacity:0,detailObj:{},startTime:0,endTime:0,actId:null,isLoadErr:!1,isShowSelectBox:!1,isShowAccreditBox:!1,isShowMoreNum:!1,isSharePage:this.$isSharePage,carRich:t.canIUse("rich-text"),contentDesc:"",isAuth:!1}},components:{selectNum:s.default,loadErr:o.default,backHome:c.default,skeleton:a.default},onLoad:function(t){this.actId=t.id,this.getDetailData(),this.$userInfo&&(this.isAuth=!0)},onShow:function(){this.c_toSaveActInfo({})},methods:r({},(0,n.mapActions)(["c_toSaveActInfo"]),{getUserInfo:function(e){if("getUserInfo:ok"==e.detail.errMsg){t.showLoading({title:"授权登陆中...",mask:!0});var i=this;this.$api.userLogin(function(e){"1"==e&&(t.hideLoading(),t.showToast({title:"授权登录成功",icon:"success",mask:!0,success:function(){i.isAuth=!0,0==i.detailObj.status&&(i.c_toSaveActInfo(i.detailObj),i.isShowSelectBox=!i.isShowSelectBox)}}))})}else this.$api.warnNotice("您已拒绝授权！"),this.isAuth=!1},toCloseBox:function(t){this.isShowSelectBox=t},toShowSelectBox:function(){0==this.detailObj.status?(this.c_toSaveActInfo(this.detailObj),this.isShowSelectBox=!this.isShowSelectBox):1==this.detailObj.status?this.$api.warnNotice("活动进行中"):2==this.detailObj.status&&this.$api.warnNotice("活动已结束")},toScroll:function(t){var e=t.detail.scrollTop;this.textOpacity=e/400>1?1:e/400},toShowMoreContent:function(){this.isShowMoreContent=!this.isShowMoreContent},toShowMoreNum:function(){this.isShowMoreNum=!this.isShowMoreNum},toRelaodData:function(){this.detailObj={},this.isLoadErr=!1,this.getDetailData()},getDetailData:function(){var t=this;this.$api.ajax({url:this.$config.actDetail,data:{act_id:this.actId,uid:1}}).then(function(e){if(200==e.statusCode&&0==e.data.code){t.detailObj=e.data.data,t.startTime=e.data.data.start_time.split(" ")[0].replace(/-/g,"/"),t.endTime=e.data.data.end_time.split(" ")[0].replace(/-/g,"/");var i=e.data.data.content.replace(/section/g,"div");i=i.replace(/<img/g,'<img class="photo"'),t.contentDesc=i,setTimeout(function(){t.isShowSkeleton=!1},200)}else t.isShowSkeleton=!1,t.api.warnNotice(e.data.message),t.isLoadErr=!0}).catch(function(){t.isShowSkeleton=!1,t.isLoadErr=!0})}}),onShareAppMessage:function(){var t=this;return{path:"/pages/activityDetail/activityDetail?id=".concat(t.actId),title:t.detailObj.name,imageUrl:t.detailObj.thumb}}};e.default=d}).call(this,i("543d")["default"])},"405d":function(t,e,i){},"49db":function(t,e,i){"use strict";i.r(e);var a=i("e757"),s=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);e["default"]=s.a},"6b9f":function(t,e,i){"use strict";i.r(e);var a=i("b7a1"),s=i("d664");for(var o in s)"default"!==o&&function(t){i.d(e,t,function(){return s[t]})}(o);i("1596");var c=i("2877"),n=Object(c["a"])(s["default"],a["a"],a["b"],!1,null,"6627514e",null);e["default"]=n.exports},"79e3":function(t,e,i){"use strict";i.r(e);var a=i("e9ab"),s=i("49db");for(var o in s)"default"!==o&&function(t){i.d(e,t,function(){return s[t]})}(o);i("099b");var c=i("2877"),n=Object(c["a"])(s["default"],a["a"],a["b"],!1,null,"160d8910",null);e["default"]=n.exports},9643:function(t,e,i){"use strict";i("9010");var a=o(i("b0ce")),s=o(i("6b9f"));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(s.default))},b7a1:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"activityDetail"},[t.isShowSkeleton?i("skeleton",{attrs:{mpcomid:"6570d89f-0"}}):t._e(),i("cu-custom",{attrs:{bgColor:t.navColor,isBack:!t.isSharePage,textOpacity:t.textOpacity,mpcomid:"6570d89f-1"}},[i("block",{slot:"content"},[t._v("活动详情")])],1),i("view",{staticClass:"activityBox"},[i("scroll-view",{staticClass:"activiScroll",attrs:{"scroll-y":!t.isShowSkeleton,eventid:"6570d89f-2"},on:{scroll:t.toScroll}},[i("view",{staticClass:"activitBanner"},[i("view",{staticClass:"activityBannerImg"},[i("image",{attrs:{src:t.detailObj.thumb,mode:"aspectFill"}})]),i("view",{staticClass:"showActivityInfo"},[i("view",{staticClass:"activityTitle skeleton-rect"},[t._v(t._s(t.detailObj.name))]),i("view",{staticClass:"activityNum skeleton-rect"},[t._v(t._s(t.detailObj.apply_num)+" 位渔友已经报名活动")])])]),i("view",{staticClass:"showActDetailInfo"},[i("view",{staticClass:"itemActInfo skeleton-rect"},[i("view",{staticClass:"itemActInfoTitle"},[i("text",[t._v("地点")])]),i("view",{staticClass:"itemShowActInfo"},[t._v(t._s(t.detailObj.address))])]),i("view",{staticClass:"itemActInfo skeleton-rect"},[i("view",{staticClass:"itemActInfoTitle"},[t._v("时间")]),i("view",{staticClass:"itemShowActInfo"},[t._v(t._s(t.startTime)+" 至 "+t._s(t.endTime))])]),i("view",{staticClass:"itemActInfo skeleton-rect"},[i("view",{staticClass:"itemActInfoTitle"},[t._v("费用")]),0==t.detailObj.is_fee?i("view",{staticClass:"itemShowActInfo"},[t._v("免费")]):t._e(),1==t.detailObj.is_fee?i("view",{staticClass:"itemShowActInfo"},[t._v("¥ "+t._s(t.detailObj.apply_fee)+" /人")]):t._e()]),i("view",{staticClass:"itemActInfo skeleton-rect"},[i("view",{staticClass:"itemActInfoTitle"},[t._v("主办方")]),i("view",{staticClass:"itemShowActInfo"},[t._v(t._s(t.detailObj.leader))])])]),i("view",{staticClass:"activityDetailContent"},[i("view",{staticClass:"actDetailTitle"},[i("text",{staticClass:"skeleton-rect"},[t._v("活动详情")])]),i("view",{staticClass:"actDetailContent skeleton-rect",style:{height:t.isShowMoreContent?"auto":"400rpx"}},[t.carRich?i("rich-text",{staticClass:"richTextShow",attrs:{type:"text",nodes:t.contentDesc,mpcomid:"6570d89f-2"}}):t._e(),i("text",{staticStyle:{"text-align":"center","margin-top":"50rpx"},attrs:{decode:"true","wx:else":""}},[t._v("由于您的微信版本过低 \\n 无法正常阅读当前内容")])],1),i("view",{staticClass:"toShowMoreBtn",attrs:{eventid:"6570d89f-0"},on:{click:t.toShowMoreContent}},[i("view",{staticClass:"showMoreBtn",class:{toShowMoreContent:t.isShowMoreContent}},[t._v(t._s(t.isShowMoreContent?"收起":"展开全部"))])])]),i("view",{staticClass:"actApplyNum"},[i("view",{staticClass:"actApplyTitle skeleton-rect"},[t._v("已报名 · "+t._s(t.detailObj.apply_num)+"人/"+t._s(0==t.detailObj.is_limit?"不限":t.detailObj.max_num))]),i("view",{staticClass:"actApplyList skeleton-rect",style:{height:t.isShowMoreNum?"auto":"450rpx"}},t._l(t.detailObj.apply_list,function(e,a){return i("view",{key:e.apply_id,staticClass:"itemActApply"},[i("view",{staticClass:"itemActApplyImg"},[i("view",{staticClass:"itemActApplyImgBox"},[i("img",{attrs:{src:e.avatar,alt:""}})]),e.apply_num>1?i("view",{staticClass:"itemActApplyNum"},[t._v(t._s(e.apply_num))]):t._e()]),i("view",{staticClass:"itemActApplyName"},[t._v(t._s(e.name))])])})),t.detailObj.apply_list&&t.detailObj.apply_list.length>8?i("view",{staticClass:"toShowMoreBtn",attrs:{eventid:"6570d89f-1"},on:{click:t.toShowMoreNum}},[i("view",{staticClass:"showMoreBtn",class:{toShowMoreContent:t.isShowMoreNum}},[t._v(t._s(t.isShowMoreNum?"收起":"展开全部"))])]):t._e()])]),i("view",{staticClass:"applyBtnShow"},[i("view",{staticClass:"applyBtnInfo"},[i("view",{staticClass:"applyBtnActName"},[t._v(t._s(t.detailObj.name))]),i("view",{staticClass:"applyBtnActNum"},[t._v(t._s(t.detailObj.apply_num)+"位小伙伴等你来挑战")])]),i("view",{staticClass:"applyToBtn",class:{actRecruit:0==t.detailObj.status,actUnderWay:1==t.detailObj.status,actfFnish:2==t.detailObj.status}},[i("view",{attrs:{eventid:"6570d89f-3"},on:{click:t.toShowSelectBox}},[t._v(t._s(0==t.detailObj.status?"我要报名":1==t.detailObj.status?"活动进行中":"活动已结束"))]),t.isAuth?t._e():i("button",{staticClass:"toAuthBtn",attrs:{"open-type":"getUserInfo",lang:"zh_CN",eventid:"6570d89f-4"},on:{getuserinfo:t.getUserInfo}},[t._v("授权")])],1)])],1),t.isShowSelectBox?i("selectNum",{attrs:{eventid:"6570d89f-5",mpcomid:"6570d89f-3"},on:{toCloseBox:t.toCloseBox}}):t._e(),t.isLoadErr?i("loadErr",{attrs:{eventid:"6570d89f-6",mpcomid:"6570d89f-4"},on:{toRelaodData:t.toRelaodData}}):t._e(),t.isSharePage?i("backHome",{attrs:{mpcomid:"6570d89f-5"}}):t._e()],1)},s=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s})},d664:function(t,e,i){"use strict";i.r(e);var a=i("39a9"),s=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);e["default"]=s.a},e757:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i("2f62");function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},a=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),a.forEach(function(e){o(t,e,i[e])})}return t}function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var c={data:function(){return{applyNum:1,priceTotal:0,actPrice:0}},computed:s({},(0,a.mapGetters)(["c_actInfo"])),onLoad:function(){this.actPrice=this.c_actInfo.apply_fee,this.priceTotal=this.c_actInfo.apply_fee*this.applyNum},methods:s({},(0,a.mapActions)(["c_toSaveActInfo"]),{toJumpActApply:function(){this.c_toSaveActInfo(s({},this.c_actInfo,{priceTotal:this.priceTotal,applyNum:this.applyNum})),t.navigateTo({url:"/pages/activityApply/activityApply"})},toColseBox:function(t){"selectNum"==t.target.dataset.sign&&this.$emit("toCloseBox",!1)},toIconCloseBox:function(){this.$emit("toCloseBox",!1)},toMinusNum:function(){this.applyNum>1&&(this.priceTotal=this.$api.pointProblem(this.priceTotal,this.actPrice,"sub"),this.applyNum--)},toAddNum:function(){this.applyNum++,this.priceTotal=this.$api.pointProblem(this.priceTotal,this.actPrice,"add")}})};e.default=c}).call(this,i("543d")["default"])},e9ab:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"selectActNum",attrs:{"data-sign":"selectNum",eventid:"01d5c1cf-4"},on:{click:t.toColseBox}},[a("view",{staticClass:"selectNumBox"},[a("view",{staticClass:"selectNumTop"},[a("text",[t._v("选择人数")]),a("view",{staticClass:"toCloseBox",attrs:{eventid:"01d5c1cf-0"},on:{click:t.toIconCloseBox}},[a("img",{attrs:{src:i("bf49"),alt:""}})])]),a("view",{staticClass:"numSelectBox"},[a("view",{staticClass:"numSelectInBox"},[a("view",{staticClass:"showActApplyCost"},[a("view",{staticClass:"showActApplyCostTitle"},[t._v("活动报名费")]),a("view",{staticClass:"showActApplyCostPrice"},[t._v("¥"+t._s(t.priceTotal))])]),a("view",{staticClass:"toSelectNumBox"},[a("view",{staticClass:"toSelectNumBoxText"},[t._v("选择人数")]),a("view",{staticClass:"toSelectNumBtn"},[a("view",{staticClass:"toSelectLeftBtn",attrs:{eventid:"01d5c1cf-1"},on:{click:t.toMinusNum}}),a("view",{staticClass:"toShowSelectNum"},[t._v(t._s(t.applyNum))]),a("view",{staticClass:"toSelectRightBtn",attrs:{eventid:"01d5c1cf-2"},on:{click:t.toAddNum}})])])])]),a("view",{staticClass:"toTureBtn",attrs:{eventid:"01d5c1cf-3"},on:{click:t.toJumpActApply}},[t._v("确认加入")])])])},s=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s})}},[["9643","common/runtime","common/vendor"]]]);