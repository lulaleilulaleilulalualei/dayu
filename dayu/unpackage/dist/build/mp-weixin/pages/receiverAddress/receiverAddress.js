(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/receiverAddress/receiverAddress"],{"15f7":function(e,t,s){"use strict";var i=s("4fa0"),a=s.n(i);a.a},"270f":function(e,t,s){"use strict";s("9010");var i=o(s("b0ce")),a=o(s("8c10"));function o(e){return e&&e.__esModule?e:{default:e}}Page((0,i.default)(a.default))},"2ac6":function(e,t,s){"use strict";s.r(t);var i=s("c16c"),a=s.n(i);for(var o in i)"default"!==o&&function(e){s.d(t,e,function(){return i[e]})}(o);t["default"]=a.a},"4fa0":function(e,t,s){},"55fb":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("view",{staticClass:"receiverAddress"},[s("cu-custom",{attrs:{bgColor:"white",isBack:!0,mpcomid:"571f22ab-0"}},[s("block",{slot:"content"},[e._v("收货地址")])],1),s("view",{staticClass:"contentBox"},[s("view",{staticClass:"addressInfo"},[s("view",{staticClass:"itemAddressInfo"},[s("view",{staticClass:"itemInfoName"},[e._v("收货人")]),s("view",{staticClass:"itemInfoInp"},[s("input",{attrs:{type:"text",value:e.userName,eventid:"571f22ab-0"},on:{blur:e.toGetUserName,confirm:e.toGetUserName}})])]),s("view",{staticClass:"itemAddressInfo"},[s("view",{staticClass:"itemInfoName"},[e._v("联系电话")]),s("view",{staticClass:"itemInfoInp"},[s("input",{attrs:{type:"number",value:e.userTel,eventid:"571f22ab-1"},on:{blur:e.toGetUserTel,confirm:e.toGetUserTel}})])]),s("view",{staticClass:"itemAddressInfo"},[s("view",{staticClass:"itemInfoName"},[e._v("所在地区")]),s("view",{staticClass:"itemInfoPicker"},[s("picker",{staticClass:"pickerSelectBox",attrs:{value:e.region,mode:"region",range:e.range,eventid:"571f22ab-2"},on:{change:e.bindPickerChange}},[s("view",{staticClass:"showPickerInfo"},[e.isSelectPicker?e._e():s("text",[e._v("请选择")]),e.isSelectPicker?s("text",{class:{hadSelectPicker:e.isSelectPicker}},[e._v(e._s(e.region[0])+", "+e._s(e.region[1])+", "+e._s(e.region[2]))]):e._e()])])],1)]),s("view",{staticClass:"itemAddressInfo"},[s("view",{staticClass:"itemInfoName"},[e._v("详细地址")]),s("view",{staticClass:"itemInfoArea"},[s("textarea",{staticClass:"itemInfoTextarea",attrs:{value:e.detailAddress,placeholder:"请输入详细地址信息，如道路、门牌号、小区、楼栋号、单元室等",eventid:"571f22ab-3"},on:{blur:e.toGetDetailAddress,confirm:e.toGetDetailAddress}})])])]),s("view",{staticClass:"showStoreInfo"},[s("view",{staticClass:"showStoreImg"},[s("img",{attrs:{src:e.c_storeInfo.goods_thumb,alt:""}})]),s("view",{staticClass:"showStoreInfoBox"},[s("view",{staticClass:"showStoreTitle"},[e._v(e._s(e.c_storeInfo.goods_name))]),s("view",{staticClass:"showStorePrice"},[e._v("¥"+e._s(e.c_storeInfo.goods_price))])])])]),s("view",{staticClass:"toPayBtn",attrs:{eventid:"571f22ab-4"},on:{click:e.toPayStore}},[e._v("立即支付")])],1)},a=[];s.d(t,"a",function(){return i}),s.d(t,"b",function(){return a})},"8c10":function(e,t,s){"use strict";s.r(t);var i=s("55fb"),a=s("2ac6");for(var o in a)"default"!==o&&function(e){s.d(t,e,function(){return a[e]})}(o);s("15f7");var r=s("2877"),n=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,"6cc4635d",null);t["default"]=n.exports},c16c:function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s("2f62");function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},i=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),i.forEach(function(t){o(e,t,s[t])})}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var r={data:function(){return{userName:"",userTel:"",region:["北京市","北京市","东城区"],isSelectPicker:!1,detailAddress:"",isToDetail:!1}},computed:a({},(0,i.mapGetters)(["c_storeInfo"])),onLoad:function(e){this.$userInfo.address&&(this.userName=this.$userInfo.address.name||"",this.userTel=this.$userInfo.address.tel||"",this.$userInfo.address.province&&(this.isSelectPicker=!0,this.region=[this.$userInfo.address.province,this.$userInfo.address.city,this.$userInfo.address.area]),this.detailAddress=this.$userInfo.address.detailed_address||"")},onShow:function(){this.isToDetail&&(e.navigateBack({delta:1}),this.isToDetail=!1)},methods:{toGetUserName:function(e){this.userName=e.detail.value},toGetUserTel:function(e){this.userTel=e.detail.value},toGetDetailAddress:function(e){this.detailAddress=e.detail.value},bindPickerChange:function(e){this.isSelectPicker=!0,this.region=e.detail.value},toPayStore:function(){""!=this.$api.trim(this.userName)?this.$api.inputTest(this.userTel,"tel")&&(this.isSelectPicker?""!=this.$api.trim(this.detailAddress)?(e.showLoading({title:"正在调用支付...",mask:!0}),this.toPay()):this.$api.warnNotice("详细地址不能为空"):this.$api.warnNotice("请选择所在地区")):this.$api.warnNotice("收货人不能为空")},toPay:function(){var t=this,s=this;this.$api.ajax({url:this.$config.buyStore,method:"POST",data:{uid:this.$userInfo.uid,openid:this.$userInfo.openid,goods_id:this.c_storeInfo.goods_id,buy_num:1,buy_json:JSON.stringify({proName:s.c_storeInfo.goods_name,proPrice:s.c_storeInfo.goods_price,proImg:s.c_storeInfo.goods_thumb,tips:s.c_storeInfo.goods_tips,type:s.c_storeInfo.goods_type,name:s.userName,tel:s.userTel,province:s.region[0],city:s.region[1],area:s.region[2],detailed_address:s.detailAddress})}}).then(function(i){200==i.statusCode&&0==i.data.code?(wx.hideLoading(),e.requestPayment({timeStamp:i.data.data.timeStamp,nonceStr:i.data.data.nonceStr,package:i.data.data.package,signType:i.data.data.signType,paySign:i.data.data.paySign,success:function(t){"requestPayment:ok"==t.errMsg&&e.showToast({title:"支付成功",icon:"success",success:function(){setTimeout(function(){s.isToDetail=!0,wx.navigateTo({url:"/pages/orderDetail/orderDetail?id=".concat(i.data.data.buy_id)})},1500)}})},fail:function(e){t.$api.warnNotice("支付失败")}})):(wx.hideLoading(),t.$api.warnNotice(i.data.message))}).catch(function(e){wx.hideLoading(),t.$api.warnNotice("购买失败")})}}};t.default=r}).call(this,s("543d")["default"])}},[["270f","common/runtime","common/vendor"]]]);